{"ast":null,"code":"import _slicedToArray from\"C:/Users/User/Desktop/Book Land/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useLocation,useNavigate}from\"react-router-dom\";import{Button,Grid,Typography}from\"@mui/material\";import{useDispatch,useSelector}from\"react-redux\";import SideImage from\"../assets/images/books-topics.png\";import TextInput from\"../components/common/TextInput\";import{useApi}from\"../hooks/useApi\";import{login}from\"../services/bookland/auth\";import{checkObjectValues}from\"../utils/vaildations\";import Loading from\"../components/ui/Loading\";import\"../styles/auth.scss\";import{showNotification}from\"../store/reducers/ui-slice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var isLoggedIn=useSelector(function(state){return state.auth.isLoggedIn;});var dispatch=useDispatch();var _useLocation=useLocation(),locationState=_useLocation.state;var _useApi=useApi(),_useApi2=_slicedToArray(_useApi,3),isLoading=_useApi2[0],isError=_useApi2[1],callApi=_useApi2[2];var navigate=useNavigate();var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),loginData=_useState2[0],setLoginData=_useState2[1];// Checking login status and location exists, then navigating to location, otherwisr sending to /\nuseEffect(function(){if(isLoggedIn){if(locationState&&locationState.visitedLocation){navigate(locationState.visitedLocation);}else{navigate(\"/\");}}},[isLoggedIn]);var loginHandler=function loginHandler(){// Calling the api\ncallApi(function(){return login(loginData).then(function(res){if(!isError){if(res.user){// If user is there set up token and login\nlocalStorage.setItem(\"token\",res.user);navigate(\"/\");dispatch(showNotification({show:true,type:\"success\",message:\"User Loggedin Successfully\"}));}else{// If user is not there showing error\ndispatch(showNotification({show:true,type:\"error\",message:\"This User Don't Exists\"}));}}});});};return/*#__PURE__*/_jsxs(Grid,{container:true,className:\"authPage\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,className:\"sideImgcontainer\",children:/*#__PURE__*/_jsx(\"img\",{src:SideImage,alt:\"Side pics for books\",className:\"w-100\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,className:\"formSide\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h1\",textAlign:\"center\",marginBottom:\"80px\",children:\"Login\"}),/*#__PURE__*/_jsx(TextInput,{label:\"Email or Username\",name:\"email\",setValue:setLoginData,value:loginData.email,className:\"mb-10\"}),/*#__PURE__*/_jsx(TextInput,{label:\"Password\",name:\"password\",setValue:setLoginData,value:loginData.password,eye:true}),isLoading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(Button,{variant:\"contained\",className:\"w-100 mt-30\",type:\"submit\",disabled:checkObjectValues(loginData),onClick:loginHandler,children:\"Login\"}),/*#__PURE__*/_jsx(Button,{className:\"newUser\",onClick:function onClick(){return navigate(\"/signup\");},children:\"New User?\"})]})})]});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","useLocation","useNavigate","Button","Grid","Typography","useDispatch","useSelector","SideImage","TextInput","useApi","login","checkObjectValues","Loading","showNotification","jsx","_jsx","jsxs","_jsxs","Login","isLoggedIn","state","auth","dispatch","_useLocation","locationState","_useApi","_useApi2","_slicedToArray","isLoading","isError","callApi","navigate","_useState","email","password","_useState2","loginData","setLoginData","visitedLocation","loginHandler","then","res","user","localStorage","setItem","show","type","message","container","className","children","item","xs","md","src","alt","variant","textAlign","marginBottom","label","name","setValue","value","eye","disabled","onClick"],"sources":["C:/Users/User/Desktop/Book Land/client/src/pages/Login.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { Button, Grid, Typography } from \"@mui/material\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport SideImage from \"../assets/images/books-topics.png\";\nimport TextInput from \"../components/common/TextInput\";\nimport { useApi } from \"../hooks/useApi\";\nimport { login } from \"../services/bookland/auth\";\nimport { checkObjectValues } from \"../utils/vaildations\";\n\nimport Loading from \"../components/ui/Loading\";\n\nimport \"../styles/auth.scss\";\nimport { showNotification } from \"../store/reducers/ui-slice\";\n\nconst Login = () => {\n  const isLoggedIn = useSelector((state) => state.auth.isLoggedIn);\n  const dispatch = useDispatch();\n  const { state: locationState } = useLocation();\n  const [isLoading, isError, callApi] = useApi();\n  const navigate = useNavigate();\n  const [loginData, setLoginData] = useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  // Checking login status and location exists, then navigating to location, otherwisr sending to /\n  useEffect(() => {\n    if (isLoggedIn) {\n      if (locationState && locationState.visitedLocation) {\n        navigate(locationState.visitedLocation);\n      } else {\n        navigate(\"/\");\n      }\n    }\n  }, [isLoggedIn]);\n\n  const loginHandler = () => {\n    // Calling the api\n    callApi(() =>\n      login(loginData).then((res) => {\n        if (!isError) {\n          if (res.user) {\n            // If user is there set up token and login\n            localStorage.setItem(\"token\", res.user);\n            navigate(\"/\");\n            dispatch(\n              showNotification({\n                show: true,\n                type: \"success\",\n                message: \"User Loggedin Successfully\",\n              })\n            );\n          } else {\n            // If user is not there showing error\n\n            dispatch(\n              showNotification({\n                show: true,\n                type: \"error\",\n                message: \"This User Don't Exists\",\n              })\n            );\n          }\n        }\n      })\n    );\n  };\n\n  return (\n    <Grid container className=\"authPage\">\n      <Grid item xs={12} md={6} className=\"sideImgcontainer\">\n        <img src={SideImage} alt=\"Side pics for books\" className=\"w-100\" />\n      </Grid>\n      <Grid item xs={12} md={6} className=\"formSide\">\n        <div className=\"container\">\n          <Typography variant=\"h1\" textAlign={\"center\"} marginBottom=\"80px\">\n            Login\n          </Typography>\n          <TextInput\n            label={\"Email or Username\"}\n            name=\"email\"\n            setValue={setLoginData}\n            value={loginData.email}\n            className=\"mb-10\"\n          />\n          <TextInput\n            label={\"Password\"}\n            name=\"password\"\n            setValue={setLoginData}\n            value={loginData.password}\n            eye\n          />\n          {isLoading ? (\n            <Loading />\n          ) : (\n            <Button\n              variant=\"contained\"\n              className=\"w-100 mt-30\"\n              type=\"submit\"\n              disabled={checkObjectValues(loginData)}\n              onClick={loginHandler}\n            >\n              Login\n            </Button>\n          )}\n          <Button className=\"newUser\" onClick={() => navigate(\"/signup\")}>\n            New User?\n          </Button>\n        </div>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}